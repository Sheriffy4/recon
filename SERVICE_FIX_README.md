# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É–∂–±—ã –æ–±—Ö–æ–¥–∞ DPI

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–ª—É–∂–±—ã –æ–±—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ `setup.py` (–æ–ø—Ü–∏—è 2), —Å–ª—É–∂–±–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è.

### –ü—Ä–∏—á–∏–Ω–∞

–°–ª—É–∂–±–∞ –Ω–µ —Ä–µ–∑–æ–ª–≤–∏–ª–∞ –¥–æ–º–µ–Ω—ã –≤ IP –∞–¥—Ä–µ—Å–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º bypass engine. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ:
- `target_ips` –æ—Å—Ç–∞–≤–∞–ª—Å—è –ø—É—Å—Ç—ã–º –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º
- Bypass engine –Ω–µ –∑–Ω–∞–ª, –∫–∞–∫–∏–µ IP –∞–¥—Ä–µ—Å–∞ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å
- –¢—Ä–∞—Ñ–∏–∫ –∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–æ–º–µ–Ω–∞–º –ø—Ä–æ—Ö–æ–¥–∏–ª –º–∏–º–æ –æ–±—Ö–æ–¥–∞

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–í —Ñ–∞–π–ª–µ `recon_service.py` –¥–æ–±–∞–≤–ª–µ–Ω –∫–æ–¥ –¥–ª—è —Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞ –¥–æ–º–µ–Ω–æ–≤ –≤ IP –∞–¥—Ä–µ—Å–∞:

```python
# –†–µ–∑–æ–ª–≤–∏–º –¥–æ–º–µ–Ω—ã –≤ IP –∞–¥—Ä–µ—Å–∞
import socket
for domain in self.monitored_domains:
    try:
        # –†–µ–∑–æ–ª–≤–∏–º –¥–æ–º–µ–Ω –≤ IP –∞–¥—Ä–µ—Å–∞
        ip_addresses = socket.getaddrinfo(domain, None)
        for addr_info in ip_addresses:
            ip = addr_info[4][0]
            if ':' not in ip:  # –¢–æ–ª—å–∫–æ IPv4
                target_ips.add(ip)
                self.logger.info(f"üîç Resolved {domain} -> {ip}")
    except Exception as e:
        self.logger.warning(f"‚ö†Ô∏è Could not resolve {domain}: {e}")
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** (–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):
   ```cmd
   python test_service_fix.py
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**:
   - ‚úÖ –†–µ–∑–æ–ª–≤–∏–Ω–≥ –¥–æ–º–µ–Ω–æ–≤ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å
   - ‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è
   - ‚úÖ –ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å
   - ‚úÖ WinDivert –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –º–µ—Å—Ç–µ

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É**:
   ```cmd
   python setup.py
   ```
   –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é `2 - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª—É–∂–±—É –æ–±—Ö–æ–¥–∞`

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ª–æ–≥–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∏:
```
üîç Resolved x.com -> 104.244.42.1
üîç Resolved youtube.com -> 142.250.185.206
üîç Resolved facebook.com -> 157.240.241.35
...
‚úÖ Resolved 45 unique IP addresses from 31 domains
```

–ò —Å–ª—É–∂–±–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –∫–æ –≤—Å–µ–º —ç—Ç–∏–º IP –∞–¥—Ä–µ—Å–∞–º.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ IP –∞–¥—Ä–µ—Å–æ–≤

–î–æ–º–µ–Ω—ã –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å IP –∞–¥—Ä–µ—Å–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:

```python
def update_target_ips(self):
    """–û–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ IP –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞."""
    new_ips = set()
    for domain in self.monitored_domains:
        try:
            ip_addresses = socket.getaddrinfo(domain, None)
            for addr_info in ip_addresses:
                ip = addr_info[4][0]
                if ':' not in ip:
                    new_ips.add(ip)
        except:
            pass
    
    if new_ips != self.target_ips:
        self.logger.info(f"üîÑ Updating target IPs: {len(new_ips)} addresses")
        self.target_ips = new_ips
        # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å bypass engine —Å –Ω–æ–≤—ã–º–∏ IP
```

### 2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ DNS

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞ –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã DNS:

```python
import json
from pathlib import Path

def save_dns_cache(self, cache_file="dns_cache.json"):
    """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫—ç—à DNS."""
    cache = {}
    for domain in self.monitored_domains:
        try:
            ips = [addr[4][0] for addr in socket.getaddrinfo(domain, None) if ':' not in addr[4][0]]
            cache[domain] = ips
        except:
            pass
    
    with open(cache_file, 'w') as f:
        json.dump(cache, f, indent=2)

def load_dns_cache(self, cache_file="dns_cache.json"):
    """–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫—ç—à DNS."""
    if Path(cache_file).exists():
        with open(cache_file, 'r') as f:
            return json.load(f)
    return {}
```

### 3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ IPv6

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ IPv6, –∏–∑–º–µ–Ω–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä:

```python
for addr_info in ip_addresses:
    ip = addr_info[4][0]
    # –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ IPv4
    target_ips.add(ip)
    self.logger.info(f"üîç Resolved {domain} -> {ip}")
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞

```python
python test_service_fix.py
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–ª—É–∂–±—ã

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É
2. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–π—Ç–∏ –Ω–∞ x.com, youtube.com, facebook.com
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥ —Å–ª—É–∂–±—ã - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏:
   ```
   üéØ Applying bypass for 104.244.42.1 -> Type: badsum_race
   üì§ FAKE [1/2] dst=104.244.42.1:443 len=517 ttl=3
   üì§ REAL [2/2] dst=104.244.42.1:443 len=517 ttl=orig
   ```

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- https://x.com - –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è
- https://youtube.com - –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è
- https://facebook.com - –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –î–æ–º–µ–Ω—ã –Ω–µ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ DNS —Å–µ—Ä–≤–µ—Ä–∞–º

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS: `ipconfig /all`
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ DNS (8.8.8.8, 1.1.1.1)

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª—É–∂–±–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –Ω–æ —Å–∞–π—Ç—ã –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞**: Bypass engine –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ WinDivert —Ä–∞–±–æ—Ç–∞–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å/—Ñ–∞–π—Ä–≤–æ–ª
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥ —Å–ª—É–∂–±—ã –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–æ–º–µ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç, –¥—Ä—É–≥–∏–µ –Ω–µ—Ç

**–ü—Ä–∏—á–∏–Ω–∞**: –†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `strategies.json`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –µ—Å—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è, —Å–æ–∑–¥–∞–π—Ç–µ issue —Å:
- –ü–æ–ª–Ω—ã–º –ª–æ–≥–æ–º —Å–ª—É–∂–±—ã
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ `test_service_fix.py`
- –û–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
- –í–µ—Ä—Å–∏–µ–π Windows –∏ Python
