#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è–º–∏.
"""

import sys
import time
import subprocess

def test_fix():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è–º–∏."""
    
    print("=" * 80)
    print("–¢–ï–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–û–ë–õ–ï–ú–´ –° –†–ï–¢–†–ê–ù–°–ú–ò–°–°–ò–Ø–ú–ò")
    print("=" * 80)
    
    print("\n‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´:")
    print("  1. –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö TCP –ø–æ—Ç–æ–∫–æ–≤ (_processed_flows)")
    print("  2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏–π –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º bypass")
    print("  3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø–æ—Ç–æ–∫–æ–≤")
    
    print("\nüìã –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û:")
    print("  ‚Ä¢ Bypass engine —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π TCP –ø–æ—Ç–æ–∫ —Ç–æ–ª—å–∫–æ –û–î–ò–ù —Ä–∞–∑")
    print("  ‚Ä¢ –†–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏–∏ ClientHello –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è bypass")
    print("  ‚Ä¢ –°—Ç–∞—Ä—ã–µ –ø–æ—Ç–æ–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥")
    
    print("\nüß™ –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨:")
    print("  1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å: python recon_service.py")
    print("  2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ")
    print("  3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥: python diagnose_bypass_issue.py")
    print("  4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏–π –±–æ–ª—å—à–µ –Ω–µ—Ç")
    
    print("\nüìä –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:")
    print("  ‚Ä¢ –ö–∞–∂–¥—ã–π sequence number –¥–æ–ª–∂–µ–Ω –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è —Ä–æ–≤–Ω–æ 2 —Ä–∞–∑–∞ (1 fake + 1 real)")
    print("  ‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π bypass –¥–æ–ª–∂–Ω–æ —Ä–∞–≤–Ω—è—Ç—å—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤")
    print("  ‚Ä¢ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è")
    
    print("\n" + "=" * 80)
    print("–ó–ê–ü–£–°–¢–ò–¢–¨ –°–ï–†–í–ò–°? (y/n): ", end="")
    
    try:
        response = input().strip().lower()
        if response == 'y':
            print("\nüöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞...")
            print("   (–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏)")
            print("=" * 80)
            subprocess.run([sys.executable, "recon_service.py"])
    except KeyboardInterrupt:
        print("\n\n‚úÖ –°–µ—Ä–≤–∏—Å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    except Exception as e:
        print(f"\n‚ùå –û—à–∏–±–∫–∞: {e}")

if __name__ == "__main__":
    test_fix()
