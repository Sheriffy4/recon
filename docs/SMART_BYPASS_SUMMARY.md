# Smart Bypass System - –°–≤–æ–¥–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–º–Ω–æ–≥–æ –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –¥–æ–º–µ–Ω–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ (x.com, instagram.com –∏ –¥—Ä.) –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –æ–±—Ö–æ–¥–æ–º —á–µ—Ä–µ–∑ DoH.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
- `core/blocked_domain_detector.py` - –î–µ—Ç–µ–∫—Ç–æ—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- `core/smart_bypass_engine.py` - –£–º–Ω—ã–π –¥–≤–∏–∂–æ–∫ –æ–±—Ö–æ–¥–∞
- `core/doh_resolver.py` - DoH resolver —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### CLI –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- `smart_bypass_cli.py` - –ö–æ–º–∞–Ω–¥–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `smart_bypass.bat` - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –¥–ª—è Windows
- `setup_hosts_bypass.py` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ hosts —Ñ–∞–π–ª–∞

### –¢–µ—Å—Ç—ã –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
- `test_smart_bypass.py` - –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- `final_bypass_test.py` - –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `analyze_test1_pcap.py` - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä PCAP —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –¥–∞–Ω–Ω—ã–µ
- `smart_bypass_config.json` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
- `blocked_domains_test.txt` - –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `SMART_BYPASS_README.md` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üîß –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
```python
detector = BlockedDomainDetector()
status = await detector.check_domain('x.com')
# –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç: ip_block, dns_block, dns_hijack, none
```

### 2. DoH –æ–±—Ö–æ–¥
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Cloudflare, Google, Quad9, AdGuard
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ DNS –∑–∞–ø—Ä–æ—Å–æ–≤
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

### 3. –£–º–Ω—ã–π –≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
```python
engine = SmartBypassEngine()
ip, method = await engine.get_optimal_ip('x.com')
# –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: hosts -> doh -> system_dns -> direct
```

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å hosts —Ñ–∞–π–ª–æ–º
```bash
python setup_hosts_bypass.py setup
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ä–∞–±–æ—á–∏–µ IP –≤ hosts
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
```bash
# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç
python final_bypass_test.py

# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
python test_smart_bypass.py

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é
smart_bypass.bat
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å x.com
python smart_bypass_cli.py check x.com --verbose

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# –î–æ–º–µ–Ω: x.com
# –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: –î–∞  
# –¢–∏–ø –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: ip_block
# –¢—Ä–µ–±—É–µ—Ç –æ–±—Ö–æ–¥–∞: –î–∞
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π IP: 104.244.42.129 (–º–µ—Ç–æ–¥: doh)
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
```bash
# –¢–µ—Å—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –¥–æ–º–µ–Ω–æ–≤
python smart_bypass_cli.py test-multiple x.com instagram.com facebook.com

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# –î–æ–º–µ–Ω               –°—Ç–∞—Ç—É—Å   –ú–µ—Ç–æ–¥        IP              –ó–∞–¥–µ—Ä–∂–∫–∞
# x.com               ‚úì        doh          104.244.42.129  45.2ms
# instagram.com       ‚úì        hosts        157.240.15.174  32.1ms
# facebook.com        ‚úì        doh          157.240.15.35   38.7ms
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ hosts —Ñ–∞–π–ª–∞
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (—Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∞)
python setup_hosts_bypass.py setup

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
python setup_hosts_bypass.py restore

# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –∑–∞–ø–∏—Å–∏
python setup_hosts_bypass.py show
```

## üìä –¢–∏–ø—ã –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:

- **ip_block** - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ IP (–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∑–∞–≥–ª—É—à–∫—É)
- **dns_block** - DNS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (–¥–æ–º–µ–Ω –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è)  
- **dns_hijack** - –ü–æ–¥–º–µ–Ω–∞ DNS (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ IP)
- **none** - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞

## üõ†Ô∏è –ú–µ—Ç–æ–¥—ã –æ–±—Ö–æ–¥–∞

1. **hosts** - –ó–∞–ø–∏—Å–∏ –∏–∑ —Ñ–∞–π–ª–∞ hosts (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. **doh** - DNS over HTTPS (–æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥)
3. **system_dns** - –°–∏—Å—Ç–µ–º–Ω—ã–π DNS (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
4. **direct** - –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
python smart_bypass_cli.py stats

# –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç
python smart_bypass_cli.py report --output report.json
```

–û—Ç—á–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç:
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ–±—Ö–æ–¥–æ–≤
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–∞—Ö
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
- –ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º–µ—Ç–æ–¥–æ–≤

## üîç –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –¥–æ–º–µ–Ω—ã

### –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤ –†–æ—Å—Å–∏–∏
- x.com (Twitter)
- instagram.com
- facebook.com  
- youtube.com (—á–∞—Å—Ç–∏—á–Ω–æ)
- telegram.org
- discord.com
- linkedin.com

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ (–æ–±—ã—á–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã)
- google.com
- github.com
- stackoverflow.com

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª `smart_bypass_config.json`:
```json
{
  "doh_providers": ["cloudflare", "google", "quad9"],
  "cache_ttl": 300,
  "known_blocked_domains": ["x.com", "instagram.com"],
  "bypass_strategies": {
    "ip_block": ["hosts", "doh"],
    "dns_block": ["doh", "hosts"]
  }
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ DoH —Å–µ—Ä–≤–µ—Ä—ã
- –°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ hosts —Ñ–∞–π–ª–∞
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ API
```python
import asyncio
from core.smart_bypass_engine import SmartBypassEngine

async def main():
    engine = SmartBypassEngine()
    
    # –ê–Ω–∞–ª–∏–∑ –¥–æ–º–µ–Ω–∞
    status = await engine.analyze_domain('x.com')
    print(f"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: {status.is_blocked}")
    
    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    result = await engine.test_connection('x.com')
    print(f"–£—Å–ø–µ—Ö: {result.success}, IP: {result.ip_used}")
    
    await engine.cleanup()

asyncio.run(main())
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–±–æ—á–µ–≥–æ IP –¥–ª—è zapret
async def get_bypass_ip(domain):
    engine = SmartBypassEngine()
    ip, method = await engine.get_optimal_ip(domain)
    await engine.cleanup()
    return ip

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
working_ip = await get_bypass_ip('x.com')
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ:
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Ä–∞–±–æ—á–∏–µ IP —á–µ—Ä–µ–∑ DoH
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å hosts —Ñ–∞–π–ª–æ–º
- ‚úÖ –í—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –æ–±—Ö–æ–¥–∞
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å x.com, instagram.com –∏ –¥—Ä—É–≥–∏–º–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –º–æ–∂–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±—Ö–æ–¥–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ–º–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ DoH –∏ –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã!