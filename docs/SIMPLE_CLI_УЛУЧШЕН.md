# ‚úÖ Simple CLI —É–ª—É—á—à–µ–Ω —Å DoH –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π

## üöÄ –ß—Ç–æ –±—ã–ª–æ —É–ª—É—á—à–µ–Ω–æ

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω DoH Resolver**
- ‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –æ—à–∏–±–∫–∏ JSON parsing** (content-type issues)
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤**: Cloudflare, Google, Quad9
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback** –º–µ–∂–¥—É DoH —Å–µ—Ä–≤–µ—Ä–∞–º–∏
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –±–µ–∑ –æ—à–∏–±–æ–∫

### 2. **–ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã**
- ‚úÖ **`quick-test`** - –±—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã (100% —É—Å–ø–µ—Ö!)
- ‚úÖ **`check-hosts`** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è hosts —Ñ–∞–π–ª–∞
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è `setup-hosts`** - —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö DoH —Å–µ—Ä–≤–µ—Ä–æ–≤

### 3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫** (IP block, DNS block, DNS hijack)
- ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º DoH
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### **–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã:**
```
üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
==================================================
üåê –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ 4 –∫–ª—é—á–µ–≤—ã—Ö –¥–æ–º–µ–Ω–æ–≤...

–ü—Ä–æ–≤–µ—Ä–∫–∞ x.com... ‚úÖ 78.0ms
–ü—Ä–æ–≤–µ—Ä–∫–∞ instagram.com... ‚úÖ 140.0ms
–ü—Ä–æ–≤–µ—Ä–∫–∞ rutracker.org... ‚úÖ 47.0ms
–ü—Ä–æ–≤–µ—Ä–∫–∞ nnmclub.to... ‚úÖ 47.0ms

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
----------------------------------------
‚úÖ x.com                78.0ms
‚úÖ instagram.com        140.0ms
‚úÖ rutracker.org        47.0ms
‚úÖ nnmclub.to           47.0ms
----------------------------------------
üìà –£—Å–ø–µ—à–Ω–æ: 4/4 (100.0%)
üéâ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ!
```

### **DoH –ø—Ä–æ–≤–µ—Ä–∫–∞:**
```
=== –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–∞: x.com ===
–°–∏—Å—Ç–µ–º–Ω—ã–π DNS: ['172.66.0.227', '162.159.140.229']
DoH (Cloudflare): ['172.66.0.227']
‚úÖ –°—Ç–∞—Ç—É—Å: –î–û–°–¢–£–ü–ï–ù
```

### **Hosts —Ñ–∞–π–ª:**
```
=== –ü—Ä–æ–≤–µ—Ä–∫–∞ hosts —Ñ–∞–π–ª–∞ ===
–§–∞–π–ª: C:\Windows\System32\drivers\etc\hosts
–í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫: 62

‚úÖ –ù–∞–π–¥–µ–Ω–æ 5 –∑–∞–ø–∏—Å–µ–π –¥–ª—è –æ–±—Ö–æ–¥–∞:
   22: 157.240.245.174 instagram.com www.instagram.com
   59: 172.67.182.196  rutracker.org
   60: 172.67.182.196  www.rutracker.org
   61: 172.67.182.196  nnmclub.to
   62: 172.67.182.196  www.nnmclub.to
```

---

## üéØ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!)
python simple_cli.py quick-test

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
python simple_cli.py check x.com

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
python simple_cli.py test x.com

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–º–µ–Ω–æ–≤
python simple_cli.py test-multi x.com instagram.com rutracker.org
```

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ hosts —Ñ–∞–π–ª–æ–º:**
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ hosts —Ñ–∞–π–ª–∞ —Å DoH IP
python simple_cli.py setup-hosts

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è hosts
python simple_cli.py check-hosts
```

### **–°–ø—Ä–∞–≤–∫–∞:**
```bash
# –ü–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
python simple_cli.py --help
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### **1. DoH Resolver –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```python
# –ë–´–õ–û (—Å –æ—à–∏–±–∫–∞–º–∏):
data = await response.json()  # –û—à–∏–±–∫–∞ content-type

# –°–¢–ê–õ–û (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ):
text = await response.text()
data = json.loads(text)  # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç content-type
```

### **2. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ DoH –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**
```python
doh_servers = [
    ("Cloudflare", "https://1.1.1.1/dns-query"),
    ("Google", "https://8.8.8.8/resolve"),
    ("Quad9", "https://9.9.9.9/dns-query")
]
```

### **3. –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
- **IP –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö IP (127.0.0.1, 0.0.0.0)
- **DNS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ DNS —Å DoH
- **DNS –ø–µ—Ä–µ—Ö–≤–∞—Ç**: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö IP –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

### **Simple CLI —Ç–µ–ø–µ—Ä—å:**
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ DoH** (100% —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –¥–æ–º–µ–Ω—ã** (x.com, instagram.com, rutracker.org, nnmclub.to)
- ‚úÖ **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã** (4/4 —É—Å–ø–µ—Ö)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç hosts —Ñ–∞–π–ª–æ–º**
- ‚úÖ **–î–∞–µ—Ç —Ç–æ—á–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º

### **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:**
- üöÄ **–ë—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É** –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- üîç **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã** —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏
- üõ†Ô∏è **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å hosts —Ñ–∞–π–ª** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ** –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

---

## üìû –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π
python simple_cli.py quick-test

# –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
python simple_cli.py check x.com
python simple_cli.py check-hosts
```

### **–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ hosts —Ñ–∞–π–ª–∞
python simple_cli.py setup-hosts

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
python simple_cli.py check-hosts

# –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
python simple_cli.py quick-test
```

**Simple CLI –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéØ**